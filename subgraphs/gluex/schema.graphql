type Swap @entity {
  id: ID!
  uniquePID: Bytes!
  user: User!
  userAddress: Bytes!
  outputReceiver: Bytes!
  inputToken: Bytes!
  inputAmount: BigInt!
  outputToken: Bytes!
  finalOutputAmount: BigInt!
  partnerFee: BigInt!
  routingFee: BigInt!
  partnerShare: BigInt!
  protocolShare: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type DailyVolume @entity {
  id: ID! # day-tokenAddress
  date: BigInt!
  token: Bytes!
  volume: BigInt!
  swapCount: BigInt!
}

type TotalVolume @entity {
  id: ID! # token address
  token: Bytes!
  totalVolume: BigInt!
  totalSwapCount: BigInt!
}

type GlobalTokenVolume @entity {
  id: ID! # token address
  token: Bytes!
  totalVolumeIn: BigInt! # Total volume as input token
  totalVolumeOut: BigInt! # Total volume as output token
  totalVolume: BigInt! # Combined total (in + out)
  totalSwapsAsInput: BigInt!
  totalSwapsAsOutput: BigInt!
  totalSwaps: BigInt! # Total times used (input + output)
  uniqueUsers: BigInt! # Number of unique users who traded this token
  lastUpdated: BigInt!
}

type User @entity {
  id: ID! # user address
  totalSwaps: BigInt!
  firstSwapAt: BigInt!
  lastSwapAt: BigInt!
  swaps: [Swap!]! @derivedFrom(field: "user")
  tokenVolumes: [UserTokenVolume!]! @derivedFrom(field: "user")
}

type UserTokenVolume @entity {
  id: ID! # user-token
  user: User!
  token: Bytes!
  totalVolume: BigInt! # totalInput + totalOutput
  swapCount: BigInt!
  lastUpdated: BigInt!
}

type FeeCollected @entity {
  id: ID!
  tokens: [Bytes!]!
  receiver: Bytes!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Protocol @entity {
  id: ID! # "protocol"
  totalSwaps: BigInt!
  totalPartnerFees: BigInt!
  totalRoutingFees: BigInt!
  totalProtocolShare: BigInt!
  totalPartnerShare: BigInt!
  uniqueUsers: BigInt!
  tokenVolumes: [ProtocolTokenVolume!]! @derivedFrom(field: "protocol")
}

type ProtocolTokenVolume @entity {
  id: ID! # token address
  protocol: Protocol!
  token: Bytes!
  totalVolume: BigInt!
  swapCount: BigInt!
  lastUpdated: BigInt!
}
